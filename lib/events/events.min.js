// https://github.com/Gozala/events/blob/master/LICENSE

(function(){function c(){this._events=this._events||{};this._maxListeners=this._maxListeners||void 0}function f(a){return"function"===typeof a}function g(a){return"object"===typeof a&&null!==a}c.EventEmitter=c;c.prototype._events=void 0;c.prototype._maxListeners=void 0;c.defaultMaxListeners=10;c.prototype.setMaxListeners=function(a){if("number"!==typeof a||0>a||isNaN(a))throw TypeError("n must be a positive number");this._maxListeners=a;return this};c.prototype.emit=function(a){var b,d,c,e;this._events||
(this._events={});if("error"===a&&(!this._events.error||g(this._events.error)&&!this._events.error.length)){b=arguments[1];if(b instanceof Error)throw b;throw TypeError('Uncaught, unspecified "error" event.');}d=this._events[a];if(void 0===d)return!1;if(f(d))switch(arguments.length){case 1:d.call(this);break;case 2:d.call(this,arguments[1]);break;case 3:d.call(this,arguments[1],arguments[2]);break;default:b=arguments.length;c=Array(b-1);for(e=1;e<b;e++)c[e-1]=arguments[e];d.apply(this,c)}else if(g(d)){b=
arguments.length;c=Array(b-1);for(e=1;e<b;e++)c[e-1]=arguments[e];d=d.slice();b=d.length;for(e=0;e<b;e++)d[e].apply(this,c)}return!0};c.prototype.addListener=function(a,b){var d;if(!f(b))throw TypeError("listener must be a function");this._events||(this._events={});this._events.newListener&&this.emit("newListener",a,f(b.listener)?b.listener:b);this._events[a]?g(this._events[a])?this._events[a].push(b):this._events[a]=[this._events[a],b]:this._events[a]=b;g(this._events[a])&&!this._events[a].warned&&
(d=void 0!==this._maxListeners?this._maxListeners:c.defaultMaxListeners)&&0<d&&this._events[a].length>d&&(this._events[a].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[a].length),"function"===typeof console.trace&&console.trace());return this};c.prototype.on=c.prototype.addListener;c.prototype.once=function(a,b){function d(){this.removeListener(a,d);c||(c=!0,b.apply(this,arguments))}
if(!f(b))throw TypeError("listener must be a function");var c=!1;d.listener=b;this.on(a,d);return this};c.prototype.removeListener=function(a,b){var d,c,e;if(!f(b))throw TypeError("listener must be a function");if(!this._events||!this._events[a])return this;d=this._events[a];e=d.length;c=-1;if(d===b||f(d.listener)&&d.listener===b)delete this._events[a],this._events.removeListener&&this.emit("removeListener",a,b);else if(g(d)){for(;0<e--;)if(d[e]===b||d[e].listener&&d[e].listener===b){c=e;break}if(0>
c)return this;1===d.length?(d.length=0,delete this._events[a]):d.splice(c,1);this._events.removeListener&&this.emit("removeListener",a,b)}return this};c.prototype.removeAllListeners=function(a){var b;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[a]&&delete this._events[a],this;if(0===arguments.length){for(b in this._events)"removeListener"!==b&&this.removeAllListeners(b);this.removeAllListeners("removeListener");this._events=
{};return this}b=this._events[a];if(f(b))this.removeListener(a,b);else for(;b.length;)this.removeListener(a,b[b.length-1]);delete this._events[a];return this};c.prototype.listeners=function(a){return this._events&&this._events[a]?f(this._events[a])?[this._events[a]]:this._events[a].slice():[]};c.listenerCount=function(a,b){return a._events&&a._events[b]?f(a._events[b])?1:a._events[b].length:0};"function"===typeof define&&define.amd?define(function(){return c}):"undefined"!==typeof module&&module.exports?
module.exports=c:"undefined"!==typeof this&&(this.events=c)})(window);
